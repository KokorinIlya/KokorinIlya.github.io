# Jest vs Mocha

В целом, синтаксис описания тестовых сценариев у обоих тестирующих фремворков очень похож, разобравшись с одним, можно очень быстро разобраться и со вторым. К тому же, оба тестовых фреймоворка хорошо работают с асинхронными функциями: достаточно просто написать 

```js
test('test name', async () => {
  const await = ...
})
```

и в теле теста можно писать произвольную логику, в том числе использующую `async/await`.

## Jest

### Плюсы:
* Уже встроен в шаблон react-приложения, можно начать писать тесты на `Jest` без дополнительной ручной настройки, в частности, `Jest` автоматически работает с 
jsx-синтаксисом и ecmascript-модулями
* В Jest уже присутствуют встроенные assertion- и mocking- фреймворки, достаточно гибкие и функциональные чтобы можно было не задумываться (по крайней мере,
на небольших проектах) о подключении к Jest сторонних фреймворков
* Если нужный матчер не удалось найти в Jest, существует библиотека `jest-extended`, где искомая функциональность найдётся с большой вероятностью 
(я, например, нашёл там матчеры для контроля порядка вызова моков)
* Очень просто осуществить мокирование: нужно просто передать в тестируемый компонент вместо мокируемой функции jest.fn, 
после чего для мокированной функции можно писать произвольные проверки на порядков вызова/количество вызовов/ сами аргумента/etc
* Запуск тестов происходит параллельно, благодаря чему тесты завершаются быстрее

### Минусы:
* Странное поведение поиска тестов по маске: поиск по маске `[.]*\.jest\.test\.js` работает хорошо, а вот поиск по маске `[.]*\.jest\.js` 
не находит ни одного файла.

## Mocha:

### Минусы:
* Нет ни встроенного assertion framevork, ни встроенного mocking framework, и то, и другое приходится делать при помощи сторонних библиотек, которые не факт, 
что подружатся. Например, в качестве assertion framework я использова `chai`, а в качестве mocking framework - `sinon`. Мне так и не удалось разобраться, как
можно с помощью `chai` проконтролировать порядок вызова `sinon`-моков.
* Я потратил на это достаточно много времени, но так и не смог настроить `Mocha` для работы с jsx-синтаксисом
* Запуск тестов происходит строго последовательно, из-за чего прохождение тестов занимает больше времени. На небольших проектах с десятком-других быстро завершающихся тестов это не играет никакой роли, но стоит добавить в начало каждого теста `await delay(200)`, и становится понятно, что это может стать проблемой при увеличении количества тестов и/или времени, требуемого на исполнение одного теста 

### Плюсы:
* За счёт описания проверок с помощью цепочек глаголов, `chai` выглядит более фукциональным, гибким и понятным чем встроенный в `Jest` assertion framework.
С другой стороны, это не совсем заслуга `Mocha` и не минус `Jest`, так как `Jest` также может быть интегрирован со сторонними assertion frameworks.

